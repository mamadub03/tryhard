{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Leaderboard</title>
    <!-- link to Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/leaderboard.css' %}">
</head>
<body>
    <!-- nav bar -->
    <header>
        <div class="nav-container">
            <h1 class="logo"><a href="/">TryHard</a></h1>
            <nav>
                <ul class="nav-links">
                    <li><a href="/timer/">Timer</a></li>
                    <li><a href="/lb/">Leaderboard</a></li>
                    {% if request.session.username %}
                        <li><span>Welcome, {{ request.session.username }}!</span></li>
                        <li><a href="/login/">Logout</a></li>
                    {% else %}
                        <li><a href="/login/">Login</a></li>
                        <li><a href="/signup/">Sign Up</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>

    <!-- leaderboard content -->
    <main>
        <section class="leaderboard-section">
            <h2>Leaderboard - Top Studying Users</h2>

            {% if users %}
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Username</th>
                            <th>Total Study Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for person in users %}
                        <tr>
                            <td class="rank">
                                {% if forloop.counter0 == 0 %}
                                    ðŸ¥‡
                                {% elif forloop.counter0 == 1 %}
                                    ðŸ¥ˆ
                                {% elif forloop.counter0 == 2 %}
                                    ðŸ¥‰
                                {% else %}
                                    {{ forloop.counter }}
                                {% endif %}
                            </td>
                            <td>{{ person.username }}</td>
                            <td>{{ person.total_time|time_format }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>No users found.</p>
            {% endif %}
        </section>
    </main>

    <footer>
        <p>TryHard Team: Mamadu, Ramin, Aamir, Zinedine.</p>
    </footer>
</body>
</html>